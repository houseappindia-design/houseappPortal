import{t as C,q as I,r as l,bv as Y,j as t}from"./index-B1PDI0VP.js";import{D as M,d as x}from"./index-CDpH9Qtl.js";import{S as u}from"./index-Dir3695H.js";import{s as P}from"./index-COmNPxgt.js";import{F as b}from"./Table-CgjYfbcH.js";import"./button-uiK9lSco.js";import"./BaseInput-BmM1wVrK.js";import"./useBreakpoint-CPp275PT.js";import"./ExclamationCircleFilled-DbwofjgQ.js";import"./InfoCircleFilled-C4VZ8Ms6.js";import"./styleChecker-BpM-eQ3-.js";import"./addEventListener-aeVG5Cin.js";import"./LeftOutlined-BqftuEcT.js";import"./EllipsisOutlined-BMmItG2f.js";import"./Pagination-DJxWdxtc.js";import"./index-CZdMhN2e.js";import"./Input-CA2Y1zHY.js";import"./getAllowClear-CZsY42AH.js";const{Option:n}=u,V=()=>{const g=C(),s=I(e=>e.interactions)||{total:0,page:1,limit:10,whatsapp:[],phone:[],mapdata:[]},[c,j]=l.useState(s.page||1),[o,v]=l.useState(s.limit||10),[y,w]=l.useState("today"),[r,S]=l.useState("phone"),[p,f]=l.useState(null),[h,k]=l.useState(null);l.useEffect(()=>{g(Y({range:y,page:c,pageSize:o,startDate:p,endDate:h,interactionType:r}))},[g,y,c,o,p,h,r]);let i=[];r==="all"?i=[...(s.whatsapp||[]).map((e,a)=>({key:`wp-${a}`,...e})),...(s.phone||[]).map((e,a)=>({key:`ph-${a}`,...e})),...(s.mapdata||[]).map((e,a)=>({key:`map-${a}`,...e}))]:r==="whatsapp"?i=(s.whatsapp||[]).map((e,a)=>({key:`wp-${a}`,...e}))||[]:r==="phone"?i=(s.phone||[]).map((e,a)=>({key:`ph-${a}`,...e}))||[]:r==="map"&&(i=(s.mapdata||[]).map((e,a)=>({key:`map-${a}`,...e}))||[]);const D=[{title:"Agent Name",dataIndex:"agent_name",key:"agent_name"},{title:"Agent Phone",dataIndex:"agent_phone",key:"agent_phone"},{title:"User ID",dataIndex:"user_id",key:"user_id"},{title:"User Name",dataIndex:"user_name",key:"user_name"},{title:"User Phone",dataIndex:"user_phone",key:"user_phone"},{title:"Click Type",dataIndex:"click_type",key:"click_type",render:e=>e.charAt(0).toUpperCase()+e.slice(1)},{title:"Clicked At",dataIndex:"clicked_at",key:"clicked_at",render:e=>new Date(e).toLocaleString(),sorter:(e,a)=>new Date(e.clicked_at)-new Date(a.clicked_at),defaultSortOrder:"descend"}],_=()=>{const e=s.total||i.length,a=(c-1)*o+1,m=Math.min(c*o,e);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("div",{children:["Showing ",r.toUpperCase()," ",a," to ",m," of"," ",e," entries"]}),t.jsxs("div",{children:["Show"," ",t.jsx(u,{value:o,onChange:d=>{v(d),j(1)},size:"small",style:{width:100},children:[5,10,20,50,100].map(d=>t.jsx(n,{value:d,children:d},d))})," ","entries"]})]})};return t.jsxs("div",{style:{padding:24},children:[t.jsx("h2",{children:"Phone Interactions"}),t.jsxs("div",{style:{display:"flex",gap:20,marginBottom:20,alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{marginRight:8},children:"Select Range:"}),t.jsxs(u,{value:y,onChange:e=>w(e),style:{width:160},children:[t.jsx(n,{value:"today",children:"Today"}),t.jsx(n,{value:"7d",children:"7 Days"}),t.jsx(n,{value:"weekly",children:"Weekly"}),t.jsx(n,{value:"1m",children:"Monthly"}),t.jsx(n,{value:"3m",children:"3 Monthly"}),t.jsx(n,{value:"6m",children:"6 Monthly"}),t.jsx(n,{value:"1y",children:"Yearly"})]})]}),t.jsxs("div",{children:[t.jsx("span",{style:{marginRight:8},children:"Filter By:"}),t.jsxs(u,{value:r,onChange:e=>S(e),style:{width:160},children:[t.jsx(n,{value:"all",children:"All"}),t.jsx(n,{value:"whatsapp",children:"WhatsApp"}),t.jsx(n,{value:"phone",children:"Phone"}),t.jsx(n,{value:"map",children:"Map"})]})]}),t.jsxs("div",{children:[t.jsx("span",{style:{marginRight:8},children:"Custom Dates:"}),t.jsx(M.RangePicker,{format:"YYYY-MM-DD",allowClear:!0,value:p&&h?[x(p),x(h)]:[],onChange:e=>{if((e==null?void 0:e.length)===2){const[a,m]=e;if(x(m).isBefore(a)){P.error("End date cannot be before start date");return}f(a.format("YYYY-MM-DD")),k(m.format("YYYY-MM-DD"))}else f(null),k(null)}})]})]}),t.jsx(b,{columns:D,dataSource:i,pagination:{current:c,pageSize:o,total:s.total||i.length,onChange:e=>j(e),showSizeChanger:!1,position:["bottomRight"]},footer:_,bordered:!0,rowKey:"key"})]})};export{V as default};
