import{t as I,q as S,r as c,aE as q,j as e,aF as E}from"./index-ar-wW8Y1.js";import{F as a,R as b,C as p}from"./index-BpwQk-vJ.js";import{C as T,T as j}from"./index-Cq2quCmH.js";import{T as w}from"./index-CESS2U1Z.js";import{S as B}from"./index-Cm6oqKQF.js";import{A as P}from"./index-DHpRNhej.js";import{I as i}from"./index-BK3JDoMW.js";import{R as Q}from"./CloseCircleOutlined-CR1FtTHL.js";import{U}from"./index-DJOI9_GO.js";import{R as v}from"./InboxOutlined-Rs9-UICi.js";import{B as f}from"./button-BCWlUTrE.js";import{s as m}from"./index-2HXk8GLO.js";import"./BaseInput-Dex--e16.js";import"./useBreakpoint-BQ0ZzjB-.js";import"./index-DH8r-IvP.js";import"./ExclamationCircleFilled-WqnR6F3o.js";import"./EllipsisOutlined-CsLI2rJ7.js";import"./PlusOutlined-ByZyTB3m.js";import"./styleChecker-U0VtqI39.js";import"./TextArea-3kCh4zOq.js";import"./getAllowClear-BsFi4imL.js";import"./InfoCircleFilled-DyHeZbDL.js";import"./Input-DYVU8m7g.js";import"./fade-CHbOdMiJ.js";import"./DeleteOutlined-DFutYCzo.js";import"./DownloadOutlined-DTidZHln.js";const z="https://api.houseapp.in/public",{Title:N,Text:D}=w,{TabPane:g}=j,ue=()=>{const l=I(),[s]=a.useForm(),{bankDetails:o,status:_,error:u}=S(r=>r.auth);console.log(o,"dbb");const[y,k]=c.useState(!0),[d,R]=c.useState("1");c.useEffect(()=>{l(q())},[l]),c.useEffect(()=>{o&&s.setFieldsValue({bank_account_number:o.bank_account_number,ifsc_code:o.ifsc_code,bank_name:o.bank_name,account_holder_name:o.account_holder_name})},[o,s]);const C=r=>{var h,x;const t=new FormData;if(d==="1")t.append("bank_account_number",r.bank_account_number),t.append("ifsc_code",r.ifsc_code),t.append("bank_name",r.bank_name),t.append("account_holder_name",r.account_holder_name);else if(d==="2"){const n=(x=(h=r.qr_code)==null?void 0:h[0])==null?void 0:x.originFileObj;if(!n){m.error("❌ Please upload a QR Code");return}t.append("qr_code",n),t.append("bank_account_number",r.bank_account_number)}l(E(t)).unwrap().then(()=>m.success("✅ Profile updated successfully!")).catch(n=>m.error(`❌ Update failed: ${n}`))},A=()=>{s.resetFields()},F=r=>Array.isArray(r)?r:r==null?void 0:r.fileList;return e.jsx("div",{style:{background:"#f0f2f5",minHeight:"100vh",padding:"60px 20px"},children:e.jsx(b,{justify:"center",children:e.jsx(p,{xs:24,sm:22,md:20,lg:16,xl:14,children:e.jsxs(T,{bordered:!1,style:{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.06)",borderRadius:"16px",padding:"32px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:32},children:[e.jsx(N,{level:4,style:{marginBottom:0},children:"Admin Account"}),e.jsx(D,{type:"secondary",children:"Update your Account information"})]}),_==="loading"?e.jsx(B,{size:"large",style:{display:"block",margin:"0 auto"}}):u?e.jsx(P,{message:"Error",description:u,type:"error",showIcon:!0}):e.jsxs(a,{form:s,layout:"vertical",onFinish:C,autoComplete:"off",children:[e.jsxs(j,{activeKey:d,onChange:R,children:[e.jsxs(g,{tab:"Bank Account",children:[e.jsx(a.Item,{label:"Bank Account Number",name:"bank_account_number",rules:[{required:!0,message:"Please enter your account number"}],children:e.jsx(i,{size:"large",placeholder:"Enter account number"})}),e.jsx(a.Item,{label:"IFSC Code",name:"ifsc_code",rules:[{required:!0,message:"Please enter IFSC code"}],children:e.jsx(i,{size:"large",placeholder:"Enter IFSC code"})}),e.jsx(a.Item,{label:"Bank Name",name:"bank_name",rules:[{required:!0,message:"Please enter bank name"}],children:e.jsx(i,{size:"large",placeholder:"Enter bank name"})}),e.jsx(a.Item,{label:"Account Holder Name",name:"account_holder_name",rules:[{required:!0,message:"Please enter account holder name"}],children:e.jsx(i,{size:"large",placeholder:"Enter account holder name"})})]},"1"),e.jsx(g,{tab:"Upload QR Code",children:o!=null&&o.qr_code_url&&y?e.jsxs("div",{style:{position:"relative",textAlign:"center"},children:[e.jsx("img",{src:`${z}${o.qr_code_url}`,alt:"QR Code",style:{width:200,borderRadius:8,marginBottom:12,boxShadow:"0 0 10px rgba(0,0,0,0.1)"}}),e.jsx(Q,{onClick:()=>k(!1),style:{position:"absolute",top:5,right:"calc(50% - 100px)",fontSize:22,color:"#f5222d",cursor:"pointer"}}),e.jsx("div",{style:{fontStyle:"italic",color:"#999"},children:"QR Code already uploaded"})]}):e.jsx(a.Item,{label:"Upload QR Code",name:"qr_code",valuePropName:"fileList",getValueFromEvent:F,rules:[{required:!0,message:"Please upload a QR code"}],children:e.jsxs(U.Dragger,{name:"qr_code",listType:"picture",accept:".png,.jpg,.jpeg,.webp",maxCount:1,style:{padding:"20px",borderRadius:"8px",backgroundColor:"#fafafa"},children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(v,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag QR file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",style:{color:"#888"},children:"Supports .png, .jpg, .jpeg, .webp files (max 1 file)"})]})})},"2")]}),e.jsx(a.Item,{style:{marginTop:32},children:e.jsxs(b,{gutter:16,children:[e.jsx(p,{span:12,children:e.jsx(f,{type:"default",block:!0,size:"large",onClick:A,style:{borderRadius:"8px"},children:"Reset"})}),e.jsx(p,{span:12,children:e.jsx(f,{type:"primary",htmlType:"submit",block:!0,size:"large",style:{backgroundColor:"#FA003F",borderColor:"#FA003F",color:"#fff",fontWeight:600,borderRadius:"8px"},children:"Update Profile"})})]})})]})]})})})})};export{ue as default};
