import{t as N,q,r as o,as as D,j as r,a9 as K,at as W}from"./index-DpkaZWrN.js";import{u as b,w as G}from"./xlsx-QGj7q-Kj.js";import{D as H,d as s}from"./index-Dzsf0CVM.js";import{S as Y}from"./Pagination-DQpAxfYX.js";import{I as M}from"./index-Cygo-vfe.js";import{R as J}from"./SearchOutlined-CSuLpZt4.js";import{S as I}from"./index-DBo6JS90.js";import{s as x}from"./index-Taqm7WFy.js";import{B as v}from"./button-Dt2JUpkg.js";import{R as Q}from"./DownloadOutlined-82SPxfhl.js";import{F as V}from"./Table-xf_ENmh-.js";import{M as X}from"./index-CWysUnmm.js";import{T as C}from"./index-Pb-brbfq.js";import{T as Z}from"./BaseInput-B3LhqOGP.js";import{R as ee}from"./DeleteOutlined-5nWwslxN.js";import"./useBreakpoint-CKKDg86l.js";import"./LeftOutlined-BqRQVFk4.js";import"./Input-mDCMwnQM.js";import"./getAllowClear-Bi388r9o.js";import"./TextArea-BcemaeHG.js";import"./ExclamationCircleFilled-CpXgg2sl.js";import"./InfoCircleFilled-4f9TSxsu.js";import"./DownloadOutlined-DTidZHln.js";import"./styleChecker-Bx8o0lrk.js";import"./addEventListener-DCYVsBvi.js";import"./EllipsisOutlined-DvdkXYl_.js";import"./index-BtwUB7m6.js";import"./index-DmQU3z-_.js";import"./fade-BL1mnfhQ.js";import"./DeleteOutlined-DFutYCzo.js";const{RangePicker:te}=H,{Option:n}=I,Pe=()=>{const i=N(),{users:l,loading:T}=q(e=>e.user),E=(l==null?void 0:l.totalUsers)||0,w=(l==null?void 0:l.users)||[],[P,g]=o.useState(!1),[p,R]=o.useState(""),[c,A]=o.useState(10),[d,y]=o.useState(1),[m,f]=o.useState(null),[u,h]=o.useState(null),[U,_]=o.useState("SelectAll"),[O,k]=o.useState(null),[j,S]=o.useState("");o.useEffect(()=>{i(D({page:d,pageSize:c,search:p,startDate:m,endDate:u}))},[i,d,c,p,m,u]);const $=e=>{_(e);let t=null,a=s();switch(e){case"SelectAll":t=s().subtract(5,"year"),a=s();break;case"today":t=a;break;case"7d":t=s().subtract(7,"day");break;case"weekly":t=s().startOf("week");break;case"1m":t=s().subtract(1,"month");break;case"3m":t=s().subtract(3,"month");break;case"6m":t=s().subtract(6,"month");break;case"1y":t=s().subtract(1,"year");break;default:t=null,a=null;break}t&&a?(f(t.format("YYYY-MM-DD")),h(a.format("YYYY-MM-DD"))):(f(null),h(null))},B=e=>{k(e),S(""),g(!0)},z=()=>{if(!j){x.warning("Please enter your password");return}i(K(j)).then(e=>{var t,a;if(!((t=e.payload)!=null&&t.success)){x.error(((a=e.payload)==null?void 0:a.message)||"Incorrect password");return}i(W(O)),x.success("User deleted successfully"),g(!1),S(""),k(null),i(D({page:d,pageSize:c,search:p,startDate:m,endDate:u}))})},F=()=>{const e=b.json_to_sheet(w),t=b.book_new();b.book_append_sheet(t,e,"Userslist"),G(t,"users.xlsx")},L=[{title:"Sr.No",render:(e,t,a)=>(d-1)*c+a+1,width:70},{title:"Name",dataIndex:"name"},{title:"Email",dataIndex:"email"},{title:"Phone",dataIndex:"phone"},{title:"Location",dataIndex:"location"},{title:"Status",dataIndex:"status",render:e=>e===1?r.jsx(C,{color:"green",children:"Active"}):r.jsx(C,{color:"red",children:"Inactive"})},{title:"Actions",render:(e,t)=>r.jsx(Y,{children:r.jsx(Z,{title:"Delete",children:r.jsx(v,{danger:!0,shape:"circle",icon:r.jsx(ee,{style:{color:"#fff"}}),style:{backgroundColor:"#ff4d4f",borderColor:"#ff4d4f"},onClick:()=>B(t.id)})})})}];return r.jsxs("div",{style:{padding:24},children:[r.jsxs(Y,{style:{marginBottom:16},wrap:!0,children:[r.jsx(M,{placeholder:"Search by name, email...",prefix:r.jsx(J,{}),value:p,onChange:e=>{R(e.target.value),y(1)},allowClear:!0}),r.jsx("span",{style:{marginRight:8},children:"Select Range:"}),r.jsxs(I,{value:U,onChange:e=>$(e),style:{width:160},children:[r.jsx(n,{value:"SelectAll",children:"Select All"}),r.jsx(n,{value:"today",children:"Today"}),r.jsx(n,{value:"7d",children:"7 Days"}),r.jsx(n,{value:"weekly",children:"Weekly"}),r.jsx(n,{value:"1m",children:"Monthly"}),r.jsx(n,{value:"3m",children:"3 Monthly"}),r.jsx(n,{value:"6m",children:"6 Monthly"}),r.jsx(n,{value:"1y",children:"Yearly"})]}),r.jsx(te,{format:"YYYY-MM-DD",value:m&&u?[s(m),s(u)]:[],onChange:e=>{if(e&&e.length===2){const[t,a]=e;if(s(a).isBefore(t)){x.error("End date cannot be before start date");return}f(t.format("YYYY-MM-DD")),h(a.format("YYYY-MM-DD")),y(1)}else f(null),h(null)}}),r.jsx(v,{icon:r.jsx(Q,{}),onClick:F,style:{background:"#1677ff",color:"#fff"},children:"Export Excel"})]}),r.jsx(V,{columns:L,dataSource:w,rowKey:"id",pagination:{current:d,pageSize:c,total:E,onChange:(e,t)=>{y(e),A(t)},showSizeChanger:!0,showTotal:(e,t)=>`Showing ${t[0]} to ${t[1]} of ${e} entries`},bordered:!0,style:{border:"1px solid #d9d9d9"}}),r.jsxs(X,{title:"Confirm Password",open:P,onOk:z,confirmLoading:T,onCancel:()=>g(!1),okText:"Delete",cancelText:"Cancel",children:[r.jsx("p",{children:"Please enter your password to confirm deletion:"}),r.jsx(M.Password,{value:j,onChange:e=>S(e.target.value),placeholder:"Enter password"})]})]})};export{Pe as default};
