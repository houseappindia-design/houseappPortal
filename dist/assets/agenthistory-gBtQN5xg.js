import{r,j as e,a7 as C}from"./index-ar-wW8Y1.js";import{S as _}from"./Pagination-SU3SLqJQ.js";import{I as v}from"./index-BK3JDoMW.js";import{R as N}from"./SearchOutlined-iwZ2K_km.js";import{B as P}from"./button-BCWlUTrE.js";import{R}from"./ReloadOutlined-M1yBUwcd.js";import{F}from"./Table-IuPX_Wg5.js";import{s as T}from"./index-2HXk8GLO.js";import{S as p}from"./index-BMpPtwSl.js";import"./LeftOutlined-TRALdpwB.js";import"./BaseInput-Dex--e16.js";import"./useBreakpoint-BQ0ZzjB-.js";import"./Input-DYVU8m7g.js";import"./getAllowClear-BsFi4imL.js";import"./TextArea-3kCh4zOq.js";import"./styleChecker-U0VtqI39.js";import"./addEventListener-be7uzAZi.js";import"./EllipsisOutlined-CsLI2rJ7.js";import"./index-Cm6oqKQF.js";import"./ExclamationCircleFilled-WqnR6F3o.js";import"./InfoCircleFilled-DyHeZbDL.js";const{Option:D}=p,tt=()=>{const[u,x]=r.useState([]),[d,c]=r.useState(""),[g,l]=r.useState(!1),[a,f]=r.useState(10),[s,m]=r.useState(1),[h,w]=r.useState(0),S=async(t=1,i=10)=>{try{l(!0);const n=await C.get(`http://localhost:8000/v1/auth/admin/position-history-agents?page=${t}&limit=${i}`),{rows:o,total:I}=n.data.data;x(o),w(I),l(!1)}catch{T.error("Failed to fetch history"),l(!1)}};r.useEffect(()=>{S(s,a)},[s,a]);const j=u.filter(t=>t.agent_name.toLowerCase().includes(d)),y=[{title:"Sr.No",render:(t,i,n)=>(s-1)*a+n+1,width:60},{title:"Agent Name",dataIndex:"agent_name"},{title:"Image",dataIndex:"image",render:t=>e.jsx("img",{src:t,alt:"Agent",style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",border:"1px solid #ccc"}}),width:80},{title:"Old Position",dataIndex:"old_position"},{title:"New Position",dataIndex:"new_position"},{title:"Phone Number",dataIndex:"Phone_Number"},{title:"Whatsapp Number",dataIndex:"Whatsapp_Number"},{title:"Changed At",dataIndex:"changed_at",render:t=>new Date(t).toLocaleString()}],b=()=>{const t=h||0,i=(s-1)*a+1,n=Math.min(s*a,t);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{children:["Showing ",i," to ",n," of ",t," entries"]}),e.jsxs("div",{children:["Show  ",e.jsx(p,{value:a,onChange:o=>{f(o),m(1)},size:"small",style:{width:100},children:[5,10,20,50,100].map(o=>e.jsx(D,{value:o,children:o},o))}),"  entries"]})]})};return e.jsxs("div",{className:"history-container",children:[e.jsx("div",{className:"history-header",style:{marginBottom:16},children:e.jsxs(_,{children:[e.jsx(v,{placeholder:"Search agent name...",prefix:e.jsx(N,{}),value:d,onChange:t=>c(t.target.value.toLowerCase()),allowClear:!0}),e.jsx(P,{icon:e.jsx(R,{}),onClick:()=>c("")})]})}),e.jsx(F,{columns:y,dataSource:j,rowKey:"history_id",loading:g,pagination:{current:s,pageSize:a,total:h,onChange:t=>m(t),showSizeChanger:!1},footer:b,bordered:!0,rowClassName:(t,i)=>i%2===0?"table-row-light":"table-row-dark"})]})};export{tt as default};
