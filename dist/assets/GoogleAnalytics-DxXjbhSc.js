import{t as C,q as I,r as i,bv as M,j as t}from"./index-DwiSOD9c.js";import{D as Y,d as g}from"./index-DSyBAw3q.js";import{S as u}from"./index-B7sXoiaU.js";import{s as b}from"./index-BGEbJUl8.js";import{F as P}from"./Table-CNVF8MzG.js";import"./button-Cq75W-mV.js";import"./BaseInput-BZp1MtTH.js";import"./useBreakpoint-BXR_P4Ln.js";import"./ExclamationCircleFilled-DbgLqVCX.js";import"./InfoCircleFilled-D4k5AYKS.js";import"./styleChecker-DTayKWbn.js";import"./addEventListener-22f-zY38.js";import"./LeftOutlined-FLk1rsHW.js";import"./EllipsisOutlined-nWYUXzi1.js";import"./Pagination-BFimxIqL.js";import"./index-Z87dX1v5.js";import"./Input-8-1QFgZP.js";import"./getAllowClear-Bnmqd7dR.js";const{Option:n}=u,V=()=>{const x=C(),s=I(e=>e.interactions)||{total:0,page:1,limit:10,whatsapp:[],phone:[],mapdata:[]},[p,j]=i.useState(s.page||1),[o,v]=i.useState(s.limit||10),[y,w]=i.useState("today"),[r,S]=i.useState("map"),[d,f]=i.useState(null),[h,k]=i.useState(null);i.useEffect(()=>{x(M({range:y,page:p,pageSize:o,startDate:d,endDate:h,interactionType:r}))},[x,y,p,o,d,h,r]);let l=[];r==="all"?l=[...(s.whatsapp||[]).map((e,a)=>({key:`wp-${a}`,...e})),...(s.phone||[]).map((e,a)=>({key:`ph-${a}`,...e})),...(s.mapdata||[]).map((e,a)=>({key:`map-${a}`,...e}))]:r==="whatsapp"?l=(s.whatsapp||[]).map((e,a)=>({key:`wp-${a}`,...e}))||[]:r==="phone"?l=(s.phone||[]).map((e,a)=>({key:`ph-${a}`,...e}))||[]:r==="map"&&(l=(s.mapdata||[]).map((e,a)=>({key:`map-${a}`,...e}))||[]);const D=[{title:"Agent Name",dataIndex:"agent_name",key:"agent_name"},{title:"Agent Phone",dataIndex:"agent_phone",key:"agent_phone"},{title:"User ID",dataIndex:"user_id",key:"user_id"},{title:"User Name",dataIndex:"user_name",key:"user_name"},{title:"User Phone",dataIndex:"user_phone",key:"user_phone"},{title:"Click Type",dataIndex:"click_type",key:"click_type",render:e=>e.charAt(0).toUpperCase()+e.slice(1)},{title:"Clicked At",dataIndex:"clicked_at",key:"clicked_at",render:e=>new Date(e).toLocaleString(),sorter:(e,a)=>new Date(e.clicked_at)-new Date(a.clicked_at),defaultSortOrder:"descend"}],_=()=>{const e=s.total||l.length,a=(p-1)*o+1,m=Math.min(p*o,e);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("div",{children:["Showing ",r.toUpperCase()," ",a," to ",m," of"," ",e," entries"]}),t.jsxs("div",{children:["Show"," ",t.jsx(u,{value:o,onChange:c=>{v(c),j(1)},size:"small",style:{width:100},children:[5,10,20,50,100].map(c=>t.jsx(n,{value:c,children:c},c))})," ","entries"]})]})};return t.jsxs("div",{style:{padding:24},children:[t.jsx("h2",{children:"Google Map Interactions"}),t.jsxs("div",{style:{display:"flex",gap:20,marginBottom:20,alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{marginRight:8},children:"Select Range:"}),t.jsxs(u,{value:y,onChange:e=>w(e),style:{width:160},children:[t.jsx(n,{value:"today",children:"Today"}),t.jsx(n,{value:"7d",children:"7 Days"}),t.jsx(n,{value:"weekly",children:"Weekly"}),t.jsx(n,{value:"1m",children:"Monthly"}),t.jsx(n,{value:"3m",children:"3 Monthly"}),t.jsx(n,{value:"6m",children:"6 Monthly"}),t.jsx(n,{value:"1y",children:"Yearly"})]})]}),t.jsxs("div",{children:[t.jsx("span",{style:{marginRight:8},children:"Filter By:"}),t.jsxs(u,{value:r,onChange:e=>S(e),style:{width:160},children:[t.jsx(n,{value:"all",children:"All"}),t.jsx(n,{value:"whatsapp",children:"WhatsApp"}),t.jsx(n,{value:"phone",children:"Phone"}),t.jsx(n,{value:"map",children:"Map"})]})]}),t.jsxs("div",{children:[t.jsx("span",{style:{marginRight:8},children:"Custom Dates:"}),t.jsx(Y.RangePicker,{format:"YYYY-MM-DD",allowClear:!0,value:d&&h?[g(d),g(h)]:[],onChange:e=>{if((e==null?void 0:e.length)===2){const[a,m]=e;if(g(m).isBefore(a)){b.error("End date cannot be before start date");return}f(a.format("YYYY-MM-DD")),k(m.format("YYYY-MM-DD"))}else f(null),k(null)}})]})]}),t.jsx(P,{columns:D,dataSource:l,pagination:{current:p,pageSize:o,total:s.total||l.length,onChange:e=>j(e),showSizeChanger:!1,position:["bottomRight"]},footer:_,bordered:!0,rowKey:"key"})]})};export{V as default};
