import{r as t,t as R,a1 as T,j as e,bF as k,bG as S,bH as C,q as D,az as A}from"./index-CfVxbtSE.js";import"./moment-G82_0lEo.js";import{F as i}from"./index-IK64T2rr.js";import{M as v}from"./index-D0fUZM7x.js";import{S as f}from"./index-Ca2fJ2Be.js";import{U}from"./index-B0ano93T.js";import{R as L}from"./InboxOutlined-DsN71O0a.js";import{I as F}from"./index-BnCVntcw.js";import{B as b}from"./button-C5_Hdfhk.js";import{s as y}from"./index-CAWaTUU6.js";import{R as N}from"./CloseCircleOutlined-B8f-ZdqI.js";import{R as O}from"./PlusOutlined-DSYM_dqM.js";import{F as q}from"./Table-CrVbExSL.js";import{S as E}from"./Pagination-DQ3OUtW1.js";import{T as _}from"./BaseInput-UAXxaOaj.js";import"./useBreakpoint-DahyjXEM.js";import"./index-rEwSGeGD.js";import"./ExclamationCircleFilled-C_flDW-8.js";import"./InfoCircleFilled-B5DrW48x.js";import"./fade-DAKRryvs.js";import"./DeleteOutlined-DFutYCzo.js";import"./DownloadOutlined-DTidZHln.js";import"./EyeOutlined-CQIrlTwV.js";import"./addEventListener-CtglvHnr.js";import"./LeftOutlined-Ox-gq8LW.js";import"./PlusOutlined-ByZyTB3m.js";import"./styleChecker-jUO8vhoa.js";import"./EllipsisOutlined-BDdOVdji.js";import"./index-0bLpuKAD.js";import"./Input-CpVgZGc3.js";import"./getAllowClear-Uyr8yb_4.js";const{Option:be}=f,{Dragger:$}=U,B=t.forwardRef((l,j)=>{const[n,c]=t.useState(!1),o=t.useRef(null),[d]=i.useForm(),[a,u]=t.useState(null),[r,p]=t.useState(null),h=R();t.useImperativeHandle(j,()=>({open:()=>c(!0)})),t.useEffect(()=>{n&&o.current&&o.current.scrollTo({top:0,behavior:"smooth"})},[n]),t.useEffect(()=>{h(T())},[h]);const w=m=>{var x;const s=(x=m.fileList[m.fileList.length-1])==null?void 0:x.originFileObj;if(s){p(s);const g=new FileReader;g.onload=()=>u(g.result),g.readAsDataURL(s)}},I=async m=>{if(!r)return y.error("Please upload an image");const s=new FormData;s.append("type",m.type),s.append("image",r);try{await h(k(s)),y.success("Login screen added successfully"),c(!1),d.resetFields(),p(null),u(null),h(S())}catch{y.error("Failed to add login screen")}};return e.jsx(v,{title:"Add Login Screen",open:n,onCancel:()=>c(!1),footer:null,children:e.jsx("div",{ref:o,style:{maxHeight:"70vh",overflowY:"auto",paddingRight:10},children:e.jsxs(i,{form:d,layout:"vertical",onFinish:I,children:[e.jsx(i.Item,{label:"Type",name:"type",rules:[{required:!0,message:"Type is required"}],children:e.jsxs(f,{placeholder:"Select Type",children:[e.jsx(f.Option,{value:"User",children:"User"}),e.jsx(f.Option,{value:"Agent",children:"Agent"})]})}),e.jsxs(i.Item,{label:"Upload Image",name:"image",rules:[{required:!0,message:"Please upload an image"}],children:[e.jsxs($,{name:"file",multiple:!1,showUploadList:!1,beforeUpload:()=>!1,onChange:w,accept:".png,.jpg,.jpeg,.webp",style:{borderRadius:8},children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(L,{style:{color:"#1677ff"}})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag image to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Supports .png, .jpg, .jpeg, .webp files (max 1 file)"})]}),a&&e.jsx(F,{src:a,alt:"Preview",width:120,style:{marginTop:10,borderRadius:8},preview:!1})]}),e.jsx(i.Item,{children:e.jsx(b,{type:"primary",htmlType:"submit",block:!0,className:"custom-orange-button",children:"Submit"})})]})})})}),{Dragger:H}=U,M=t.forwardRef(({data:l},j)=>{const[n,c]=t.useState(!1),[o]=i.useForm(),[d,a]=t.useState(null),[u,r]=t.useState(null),p=R();t.useImperativeHandle(j,()=>({open:()=>{c(!0)}})),t.useEffect(()=>{n&&l&&(o.setFieldsValue({type:l.type}),a(l.image_url?`${l.image_url}`:null),r(null))},[n,l]);const h=m=>{var x;const s=(x=m.fileList[m.fileList.length-1])==null?void 0:x.originFileObj;if(s){r(s);const g=new FileReader;g.onload=()=>a(g.result),g.readAsDataURL(s)}},w=async m=>{try{const s=new FormData;s.append("type",m.type),u&&s.append("image",u),await p(C({id:l.id,formData:s})),y.success("Login screen updated successfully"),c(!1),o.resetFields(),r(null),a(null),p(S())}catch{y.error("Failed to update login screen")}},I=()=>{c(!1),o.resetFields(),r(null),a(null)};return e.jsx(v,{title:"Update Login Screen",open:n,onCancel:I,footer:null,destroyOnClose:!0,width:600,children:e.jsx("div",{style:{maxHeight:"70vh",overflowY:"auto",paddingRight:10},children:e.jsxs(i,{form:o,layout:"vertical",onFinish:w,children:[e.jsx(i.Item,{label:"Type",name:"type",rules:[{required:!0,message:"Type is required"}],children:e.jsxs(f,{placeholder:"Select Type",children:[e.jsx(f.Option,{value:"User",children:"User"}),e.jsx(f.Option,{value:"Agent",children:"Agent"})]})}),e.jsx(i.Item,{label:"Upload Image",name:"image",rules:[{required:!d,message:"Image is required"}],children:d?e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx(F,{src:d,alt:"Preview",width:140,style:{borderRadius:8},preview:!1}),e.jsx(N,{onClick:()=>{a(null),r(null)},style:{position:"absolute",top:-10,right:-10,fontSize:22,color:"red",cursor:"pointer",background:"white",borderRadius:"50%"}})]}):e.jsxs(H,{name:"file",multiple:!1,showUploadList:!1,beforeUpload:()=>!1,onChange:h,accept:".png,.jpg,.jpeg,.webp",style:{borderRadius:8},children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(L,{style:{color:"#1677ff"}})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag image to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Supports .png, .jpg, .jpeg, .webp files"})]})}),e.jsx(i.Item,{children:e.jsx(b,{type:"primary",className:"custom-orange-button",htmlType:"submit",block:!0,children:"Update Now"})})]})})})}),we=()=>{const l=R(),{loginscreenData:j,loading:n}=D(r=>r.loginscreen),[c,o]=t.useState(null),d=t.useRef(),a=t.useRef();t.useEffect(()=>{l(S())},[l]);const u=[{title:"Type",dataIndex:"type",render:(r,p)=>e.jsx("a",{href:p.link_url,target:"_blank",rel:"noreferrer",children:r})},{title:"Image",dataIndex:"image_url",render:(r,p)=>e.jsx("a",{href:p.link_url,target:"_blank",rel:"noreferrer",children:e.jsx(F,{width:100,src:`${r}`})})},{title:"Actions",render:r=>e.jsx(E,{children:e.jsx(_,{title:"Edit",children:e.jsx(b,{icon:e.jsx(A,{}),className:"custom-orange-button",onClick:()=>{o(r),a.current.open(r)}})})})}];return e.jsxs("div",{style:{padding:24},children:[e.jsx("div",{style:{textAlign:"right",marginBottom:16},children:e.jsx(b,{className:"custom-orange-button",type:"primary",icon:e.jsx(O,{}),onClick:()=>d.current.open(),children:"Add Banner"})}),e.jsx(q,{columns:u,dataSource:j,rowKey:"id",pagination:{pageSize:10},bordered:!0,loading:n}),e.jsx(B,{ref:d}),e.jsx(M,{ref:a,data:c})]})};export{we as default};
